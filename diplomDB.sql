-- phpMyAdmin SQL Dump
-- version 5.2.2deb1
-- https://www.phpmyadmin.net/
--
-- Хост: localhost:3306
-- Время создания: Июн 05 2025 г., 15:16
-- Версия сервера: 8.4.5-0ubuntu0.1
-- Версия PHP: 8.4.5

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- База данных: `diplomDB`
--

-- --------------------------------------------------------

--
-- Структура таблицы `departments`
--

CREATE TABLE `departments` (
  `id` int NOT NULL,
  `name` varchar(100) NOT NULL,
  `parent_id` int DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='Иерархическая структура подразделений';

--
-- Дамп данных таблицы `departments`
--

INSERT INTO `departments` (`id`, `name`, `parent_id`, `created_at`) VALUES
(1, 'Руководство', NULL, '2025-03-30 17:29:32'),
(2, 'IT-отдел', NULL, '2025-03-30 17:29:32'),
(3, 'Бухгалтерия', NULL, '2025-03-30 17:29:32'),
(4, 'Разработка', NULL, '2025-03-30 17:29:32'),
(5, 'Тестирование', NULL, '2025-03-30 17:29:32');

-- --------------------------------------------------------

--
-- Структура таблицы `permissions`
--

CREATE TABLE `permissions` (
  `id` int NOT NULL,
  `name` varchar(50) NOT NULL,
  `code` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Дамп данных таблицы `permissions`
--

INSERT INTO `permissions` (`id`, `name`, `code`) VALUES
(1, 'Создание пользователей', 'create_user'),
(2, 'Редактирование пользователей', 'edit_user'),
(3, 'Удаление пользователей', 'delete_user'),
(4, 'Просмотр финансов', 'view_finance'),
(5, 'Управление командой', 'manage_team'),
(6, 'Доступ к админ-панели', 'admin_panel');

-- --------------------------------------------------------

--
-- Структура таблицы `positions`
--

CREATE TABLE `positions` (
  `id` int NOT NULL,
  `name` varchar(100) NOT NULL,
  `department_id` int DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='Штатные должности с вилкой окладов';

--
-- Дамп данных таблицы `positions`
--

INSERT INTO `positions` (`id`, `name`, `department_id`) VALUES
(1, 'Генеральный директор', 1),
(2, 'Team Lead', 4),
(3, 'Backend Developer', 4),
(4, 'QA Engineer', 5),
(5, 'Главный бухгалтер', 3),
(6, 'HR', 1),
(7, 'Frontend Developer', 4);

-- --------------------------------------------------------

--
-- Структура таблицы `roles`
--

CREATE TABLE `roles` (
  `id` int NOT NULL,
  `name` varchar(50) NOT NULL,
  `description` text
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Дамп данных таблицы `roles`
--

INSERT INTO `roles` (`id`, `name`, `description`) VALUES
(1, 'Admin', 'Полный доступ ко всем функциям системы'),
(2, 'HR', 'Управление кадрами, создание пользователей'),
(3, 'Руководитель', 'Управление своим департаментом'),
(4, 'Сотрудник', 'Стандартный доступ для работы');

-- --------------------------------------------------------

--
-- Структура таблицы `role_permissions`
--

CREATE TABLE `role_permissions` (
  `role_id` int NOT NULL,
  `permission_id` int NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Дамп данных таблицы `role_permissions`
--

INSERT INTO `role_permissions` (`role_id`, `permission_id`) VALUES
(1, 1),
(2, 1),
(1, 2),
(2, 2),
(1, 3),
(1, 4),
(1, 5),
(3, 5),
(1, 6);

-- --------------------------------------------------------

--
-- Структура таблицы `turnstile_logs`
--

CREATE TABLE `turnstile_logs` (
  `id` int NOT NULL,
  `session_id` int NOT NULL,
  `action` enum('enter','exit') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `exit_type` enum('short','lunch','final') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `time` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Дамп данных таблицы `turnstile_logs`
--

INSERT INTO `turnstile_logs` (`id`, `session_id`, `action`, `exit_type`, `time`) VALUES
(8, 159, 'exit', 'lunch', '2025-05-30 10:46:29'),
(9, 161, 'exit', 'final', '2025-05-30 10:47:08'),
(10, 164, 'exit', 'final', '2025-06-05 10:17:49'),
(11, 165, 'exit', 'lunch', '2025-06-05 10:17:55'),
(12, 165, 'exit', 'final', '2025-06-05 10:18:00');

-- --------------------------------------------------------

--
-- Структура таблицы `users`
--

CREATE TABLE `users` (
  `id` int NOT NULL,
  `email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `password` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `avatar_path` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `position_id` int DEFAULT NULL,
  `department_id` int DEFAULT NULL,
  `birth_date` date DEFAULT NULL,
  `phone` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `about` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
  `role_id` int DEFAULT NULL,
  `new_id` int DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Дамп данных таблицы `users`
--

INSERT INTO `users` (`id`, `email`, `password`, `name`, `created_at`, `updated_at`, `avatar_path`, `position_id`, `department_id`, `birth_date`, `phone`, `about`, `role_id`, `new_id`) VALUES
(1, 'andrey@company.com', 'testik', 'Андрей Карасёв', '2025-03-30 17:24:59', '2025-05-29 17:08:43', 'user_1.jpg', 3, 2, '1997-06-10', '+79539295071', 'Люблю бокс', NULL, 1),
(4, 'egor@company.com', 'test', 'Егор Карпычев', '2025-03-28 21:16:09', '2025-05-29 17:11:47', 'user_4.jpg', 4, 5, '2025-04-11', '+79539693334', 'Тестирую еду', NULL, 2),
(5, 'director@company.com', 'password', 'Александр Бородин', '2025-05-11 12:15:12', '2025-05-29 17:16:11', 'user_5.jpg', 1, 1, '1980-04-03', '+79555353522', '\n', 1, 3),
(6, 'hr@company.com', 'hrcompany', 'Анна Сидорова', '2025-05-11 12:18:29', '2025-05-29 17:02:14', 'user_6.jpg', 6, 1, NULL, NULL, 'Всегда в поиске талантов!', 2, 4),
(30, 'natali@company.com', '8b4kHbcbE8', 'Наталья Бердникова', '2025-05-13 19:55:18', '2025-05-29 17:19:21', 'user_30.jpg', 5, 3, '2000-04-30', '+79432134524', 'Деньги моя страсть', NULL, 5),
(31, 'sergey@company.com', '8Eej9ZYd4h', 'Сергей Григорян', '2025-05-13 20:03:58', '2025-05-29 17:24:21', 'user_31.png', 2, 1, '1997-01-12', '+79539212313', 'Самый лучший из армян наш Серега Григорян ', NULL, 6),
(32, 'vladimir@company.com', '0euwJ2DnFN', 'Владимир Семенюк', '2025-05-13 20:34:58', '2025-05-29 17:29:19', 'user_32.jpg', 7, 2, '1999-11-23', '+79342124423', 'Шеф фронтенда', NULL, 7);

-- --------------------------------------------------------

--
-- Структура таблицы `user_day_events`
--

CREATE TABLE `user_day_events` (
  `id` int NOT NULL,
  `user_id` int NOT NULL,
  `start_date` date NOT NULL,
  `end_date` date NOT NULL,
  `type` enum('vacation','sick','day_off','business_trip') NOT NULL,
  `comment` text,
  `created_at` datetime DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Дамп данных таблицы `user_day_events`
--

INSERT INTO `user_day_events` (`id`, `user_id`, `start_date`, `end_date`, `type`, `comment`, `created_at`) VALUES
(1, 1, '2025-05-10', '2025-05-11', 'vacation', 'Weekend vacation', '2025-04-25 10:00:00'),
(2, 4, '2025-05-03', '2025-05-04', 'sick', 'Weekend sick', '2025-05-02 15:30:00'),
(3, 4, '2025-05-07', '2025-05-07', 'sick', 'Feeling unwell', '2025-05-07 08:15:00'),
(4, 5, '2025-05-14', '2025-05-16', 'business_trip', 'Client meetings in Moscow', '2025-05-10 12:00:00'),
(5, 6, '2025-05-20', '2025-05-23', 'vacation', 'Summer vacation', '2025-04-15 14:20:00'),
(6, 30, '2025-05-12', '2025-05-13', 'sick', 'Flu', '2025-05-11 18:00:00'),
(7, 31, '2025-05-05', '2025-05-07', 'business_trip', 'Conference in St. Petersburg', '2025-04-28 11:45:00'),
(8, 32, '2025-05-09', '2025-05-09', 'day_off', 'Compensation for overtime', '2025-05-05 16:30:00'),
(23, 1, '2025-05-24', '2025-05-25', 'sick', '', '2025-05-30 08:27:05');

-- --------------------------------------------------------

--
-- Структура таблицы `work_sessions`
--

CREATE TABLE `work_sessions` (
  `id` int NOT NULL,
  `user_id` int NOT NULL,
  `date` date NOT NULL,
  `start_time` datetime NOT NULL,
  `end_time` datetime DEFAULT NULL,
  `total_worked_seconds` int NOT NULL DEFAULT '0',
  `status` enum('active','paused','completed') NOT NULL DEFAULT 'active',
  `last_paused_at` datetime DEFAULT NULL,
  `last_resumed_at` datetime DEFAULT NULL,
  `total_paused_seconds` int NOT NULL DEFAULT '0',
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Дамп данных таблицы `work_sessions`
--

INSERT INTO `work_sessions` (`id`, `user_id`, `date`, `start_time`, `end_time`, `total_worked_seconds`, `status`, `last_paused_at`, `last_resumed_at`, `total_paused_seconds`, `created_at`) VALUES
(1, 1, '2025-05-01', '2025-05-01 09:05:12', '2025-05-01 17:30:45', 27933, 'completed', NULL, NULL, 420, '2025-05-01 06:05:12'),
(2, 1, '2025-05-02', '2025-05-02 08:45:00', '2025-05-02 16:15:00', 25200, 'completed', '2025-05-02 12:30:00', '2025-05-02 13:15:00', 2700, '2025-05-02 05:45:00'),
(3, 1, '2025-05-05', '2025-05-05 10:00:00', '2025-05-05 15:45:00', 18900, 'completed', '2025-05-05 12:00:00', '2025-05-05 12:30:00', 1800, '2025-05-05 07:00:00'),
(4, 1, '2025-05-06', '2025-05-06 09:15:00', '2025-05-06 18:00:00', 29700, 'completed', '2025-05-06 13:00:00', '2025-05-06 14:00:00', 3600, '2025-05-06 06:15:00'),
(5, 1, '2025-05-07', '2025-05-07 08:30:00', '2025-05-07 16:45:00', 27900, 'completed', '2025-05-07 12:15:00', '2025-05-07 13:00:00', 2700, '2025-05-07 05:30:00'),
(6, 1, '2025-05-08', '2025-05-08 09:00:00', '2025-05-08 17:30:00', 28800, 'completed', '2025-05-08 13:00:00', '2025-05-08 14:00:00', 3600, '2025-05-08 06:00:00'),
(7, 1, '2025-05-09', '2025-05-09 10:15:00', '2025-05-09 15:30:00', 17100, 'completed', NULL, NULL, 0, '2025-05-09 07:15:00'),
(8, 1, '2025-05-12', '2025-05-12 09:00:00', '2025-05-12 17:00:00', 25200, 'completed', '2025-05-12 12:00:00', '2025-05-12 13:00:00', 3600, '2025-05-12 06:00:00'),
(9, 1, '2025-05-13', '2025-05-13 08:45:00', '2025-05-13 17:15:00', 28800, 'completed', '2025-05-13 12:30:00', '2025-05-13 13:30:00', 3600, '2025-05-13 05:45:00'),
(10, 1, '2025-05-14', '2025-05-14 09:30:00', '2025-05-14 16:45:00', 24300, 'completed', '2025-05-14 13:00:00', '2025-05-14 14:00:00', 3600, '2025-05-14 06:30:00'),
(11, 1, '2025-05-15', '2025-05-15 10:00:00', '2025-05-15 18:00:00', 25200, 'completed', '2025-05-15 13:00:00', '2025-05-15 14:00:00', 3600, '2025-05-15 07:00:00'),
(12, 1, '2025-05-16', '2025-05-16 08:00:00', '2025-05-16 16:30:00', 28800, 'completed', '2025-05-16 12:00:00', '2025-05-16 13:00:00', 3600, '2025-05-16 05:00:00'),
(13, 1, '2025-05-19', '2025-05-19 09:15:00', '2025-05-19 17:45:00', 28800, 'completed', '2025-05-19 13:00:00', '2025-05-19 14:00:00', 3600, '2025-05-19 06:15:00'),
(14, 1, '2025-05-20', '2025-05-20 09:00:00', '2025-05-20 17:00:00', 25200, 'completed', '2025-05-20 12:00:00', '2025-05-20 13:00:00', 3600, '2025-05-20 06:00:00'),
(15, 1, '2025-05-21', '2025-05-21 10:30:00', '2025-05-21 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-21 07:30:00'),
(16, 1, '2025-05-22', '2025-05-22 08:45:00', '2025-05-22 17:15:00', 28800, 'completed', '2025-05-22 12:30:00', '2025-05-22 13:30:00', 3600, '2025-05-22 05:45:00'),
(17, 1, '2025-05-23', '2025-05-23 09:00:00', '2025-05-23 16:00:00', 23400, 'completed', '2025-05-23 12:00:00', '2025-05-23 13:00:00', 3600, '2025-05-23 06:00:00'),
(18, 1, '2025-05-26', '2025-05-26 09:30:00', '2025-05-26 17:30:00', 25200, 'completed', '2025-05-26 13:00:00', '2025-05-26 14:00:00', 3600, '2025-05-26 06:30:00'),
(19, 1, '2025-05-27', '2025-05-27 08:00:00', '2025-05-27 16:00:00', 28800, 'completed', '2025-05-27 12:00:00', '2025-05-27 13:00:00', 3600, '2025-05-27 05:00:00'),
(20, 1, '2025-05-28', '2025-05-28 09:15:00', '2025-05-28 17:15:00', 25200, 'completed', '2025-05-28 12:30:00', '2025-05-28 13:30:00', 3600, '2025-05-28 06:15:00'),
(21, 1, '2025-05-29', '2025-05-29 10:00:00', '2025-05-29 18:00:00', 25200, 'completed', '2025-05-29 13:00:00', '2025-05-29 14:00:00', 3600, '2025-05-29 07:00:00'),
(23, 4, '2025-05-01', '2025-05-01 10:00:00', '2025-05-01 18:30:00', 28800, 'completed', '2025-05-01 14:00:00', '2025-05-01 15:00:00', 3600, '2025-05-01 07:00:00'),
(24, 4, '2025-05-02', '2025-05-02 09:15:00', '2025-05-02 17:15:00', 25200, 'completed', '2025-05-02 13:00:00', '2025-05-02 14:00:00', 3600, '2025-05-02 06:15:00'),
(25, 4, '2025-05-05', '2025-05-05 08:30:00', '2025-05-05 16:30:00', 28800, 'completed', '2025-05-05 12:30:00', '2025-05-05 13:30:00', 3600, '2025-05-05 05:30:00'),
(26, 4, '2025-05-06', '2025-05-06 09:00:00', '2025-05-06 17:00:00', 25200, 'completed', '2025-05-06 13:00:00', '2025-05-06 14:00:00', 3600, '2025-05-06 06:00:00'),
(27, 4, '2025-05-07', '2025-05-07 10:30:00', '2025-05-07 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-07 07:30:00'),
(28, 4, '2025-05-08', '2025-05-08 08:45:00', '2025-05-08 17:15:00', 28800, 'completed', '2025-05-08 12:45:00', '2025-05-08 13:45:00', 3600, '2025-05-08 05:45:00'),
(29, 4, '2025-05-09', '2025-05-09 09:00:00', '2025-05-09 15:00:00', 18000, 'completed', '2025-05-09 12:00:00', '2025-05-09 13:00:00', 3600, '2025-05-09 06:00:00'),
(30, 4, '2025-05-12', '2025-05-12 10:00:00', '2025-05-12 18:00:00', 25200, 'completed', '2025-05-12 14:00:00', '2025-05-12 15:00:00', 3600, '2025-05-12 07:00:00'),
(31, 4, '2025-05-13', '2025-05-13 09:15:00', '2025-05-13 17:15:00', 25200, 'completed', '2025-05-13 13:15:00', '2025-05-13 14:15:00', 3600, '2025-05-13 06:15:00'),
(32, 4, '2025-05-14', '2025-05-14 08:30:00', '2025-05-14 16:30:00', 28800, 'completed', '2025-05-14 12:30:00', '2025-05-14 13:30:00', 3600, '2025-05-14 05:30:00'),
(33, 4, '2025-05-15', '2025-05-15 09:00:00', '2025-05-15 17:00:00', 25200, 'completed', '2025-05-15 13:00:00', '2025-05-15 14:00:00', 3600, '2025-05-15 06:00:00'),
(34, 4, '2025-05-16', '2025-05-16 10:15:00', '2025-05-16 18:15:00', 25200, 'completed', '2025-05-16 14:15:00', '2025-05-16 15:15:00', 3600, '2025-05-16 07:15:00'),
(35, 4, '2025-05-19', '2025-05-19 09:30:00', '2025-05-19 17:30:00', 25200, 'completed', '2025-05-19 13:30:00', '2025-05-19 14:30:00', 3600, '2025-05-19 06:30:00'),
(36, 4, '2025-05-20', '2025-05-20 08:45:00', '2025-05-20 16:45:00', 28800, 'completed', '2025-05-20 12:45:00', '2025-05-20 13:45:00', 3600, '2025-05-20 05:45:00'),
(37, 4, '2025-05-21', '2025-05-21 09:00:00', '2025-05-21 17:00:00', 25200, 'completed', '2025-05-21 13:00:00', '2025-05-21 14:00:00', 3600, '2025-05-21 06:00:00'),
(38, 4, '2025-05-22', '2025-05-22 10:30:00', '2025-05-22 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-22 07:30:00'),
(39, 4, '2025-05-23', '2025-05-23 09:15:00', '2025-05-23 17:15:00', 25200, 'completed', '2025-05-23 13:15:00', '2025-05-23 14:15:00', 3600, '2025-05-23 06:15:00'),
(40, 4, '2025-05-26', '2025-05-26 08:30:00', '2025-05-26 16:30:00', 28800, 'completed', '2025-05-26 12:30:00', '2025-05-26 13:30:00', 3600, '2025-05-26 05:30:00'),
(41, 4, '2025-05-27', '2025-05-27 09:00:00', '2025-05-27 17:00:00', 25200, 'completed', '2025-05-27 13:00:00', '2025-05-27 14:00:00', 3600, '2025-05-27 06:00:00'),
(42, 4, '2025-05-28', '2025-05-28 10:15:00', '2025-05-28 18:15:00', 25200, 'completed', '2025-05-28 14:15:00', '2025-05-28 15:15:00', 3600, '2025-05-28 07:15:00'),
(43, 4, '2025-05-29', '2025-05-29 09:30:00', '2025-05-29 17:30:00', 25200, 'completed', '2025-05-29 13:30:00', '2025-05-29 14:30:00', 3600, '2025-05-29 06:30:00'),
(45, 5, '2025-05-01', '2025-05-01 08:00:00', '2025-05-01 16:00:00', 28800, 'completed', '2025-05-01 12:00:00', '2025-05-01 13:00:00', 3600, '2025-05-01 05:00:00'),
(46, 5, '2025-05-02', '2025-05-02 09:00:00', '2025-05-02 17:00:00', 25200, 'completed', '2025-05-02 13:00:00', '2025-05-02 14:00:00', 3600, '2025-05-02 06:00:00'),
(47, 5, '2025-05-05', '2025-05-05 10:00:00', '2025-05-05 18:00:00', 25200, 'completed', '2025-05-05 14:00:00', '2025-05-05 15:00:00', 3600, '2025-05-05 07:00:00'),
(48, 5, '2025-05-06', '2025-05-06 08:30:00', '2025-05-06 16:30:00', 28800, 'completed', '2025-05-06 12:30:00', '2025-05-06 13:30:00', 3600, '2025-05-06 05:30:00'),
(49, 5, '2025-05-07', '2025-05-07 09:15:00', '2025-05-07 17:15:00', 25200, 'completed', '2025-05-07 13:15:00', '2025-05-07 14:15:00', 3600, '2025-05-07 06:15:00'),
(50, 5, '2025-05-08', '2025-05-08 10:30:00', '2025-05-08 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-08 07:30:00'),
(51, 5, '2025-05-09', '2025-05-09 08:45:00', '2025-05-09 16:45:00', 28800, 'completed', '2025-05-09 12:45:00', '2025-05-09 13:45:00', 3600, '2025-05-09 05:45:00'),
(52, 5, '2025-05-12', '2025-05-12 09:00:00', '2025-05-12 17:00:00', 25200, 'completed', '2025-05-12 13:00:00', '2025-05-12 14:00:00', 3600, '2025-05-12 06:00:00'),
(53, 5, '2025-05-13', '2025-05-13 10:15:00', '2025-05-13 18:15:00', 25200, 'completed', '2025-05-13 14:15:00', '2025-05-13 15:15:00', 3600, '2025-05-13 07:15:00'),
(54, 5, '2025-05-14', '2025-05-14 08:30:00', '2025-05-14 16:30:00', 28800, 'completed', '2025-05-14 12:30:00', '2025-05-14 13:30:00', 3600, '2025-05-14 05:30:00'),
(55, 5, '2025-05-15', '2025-05-15 09:45:00', '2025-05-15 17:45:00', 25200, 'completed', '2025-05-15 13:45:00', '2025-05-15 14:45:00', 3600, '2025-05-15 06:45:00'),
(56, 5, '2025-05-16', '2025-05-16 08:00:00', '2025-05-16 16:00:00', 28800, 'completed', '2025-05-16 12:00:00', '2025-05-16 13:00:00', 3600, '2025-05-16 05:00:00'),
(57, 5, '2025-05-19', '2025-05-19 10:30:00', '2025-05-19 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-19 07:30:00'),
(58, 5, '2025-05-20', '2025-05-20 09:15:00', '2025-05-20 17:15:00', 25200, 'completed', '2025-05-20 13:15:00', '2025-05-20 14:15:00', 3600, '2025-05-20 06:15:00'),
(59, 5, '2025-05-21', '2025-05-21 08:45:00', '2025-05-21 16:45:00', 28800, 'completed', '2025-05-21 12:45:00', '2025-05-21 13:45:00', 3600, '2025-05-21 05:45:00'),
(60, 5, '2025-05-22', '2025-05-22 09:30:00', '2025-05-22 17:30:00', 25200, 'completed', '2025-05-22 13:30:00', '2025-05-22 14:30:00', 3600, '2025-05-22 06:30:00'),
(61, 5, '2025-05-23', '2025-05-23 10:00:00', '2025-05-23 18:00:00', 25200, 'completed', '2025-05-23 14:00:00', '2025-05-23 15:00:00', 3600, '2025-05-23 07:00:00'),
(62, 5, '2025-05-26', '2025-05-26 08:15:00', '2025-05-26 16:15:00', 28800, 'completed', '2025-05-26 12:15:00', '2025-05-26 13:15:00', 3600, '2025-05-26 05:15:00'),
(63, 5, '2025-05-27', '2025-05-27 09:45:00', '2025-05-27 17:45:00', 25200, 'completed', '2025-05-27 13:45:00', '2025-05-27 14:45:00', 3600, '2025-05-27 06:45:00'),
(64, 5, '2025-05-28', '2025-05-28 08:30:00', '2025-05-28 16:30:00', 28800, 'completed', '2025-05-28 12:30:00', '2025-05-28 13:30:00', 3600, '2025-05-28 05:30:00'),
(65, 5, '2025-05-29', '2025-05-29 10:15:00', '2025-05-29 18:15:00', 25200, 'completed', '2025-05-29 14:15:00', '2025-05-29 15:15:00', 3600, '2025-05-29 07:15:00'),
(67, 6, '2025-05-01', '2025-05-01 09:15:00', '2025-05-01 17:15:00', 25200, 'completed', '2025-05-01 13:15:00', '2025-05-01 14:15:00', 3600, '2025-05-01 06:15:00'),
(68, 6, '2025-05-02', '2025-05-02 08:30:00', '2025-05-02 16:30:00', 28800, 'completed', '2025-05-02 12:30:00', '2025-05-02 13:30:00', 3600, '2025-05-02 05:30:00'),
(69, 6, '2025-05-05', '2025-05-05 10:45:00', '2025-05-05 16:45:00', 18000, 'completed', NULL, NULL, 0, '2025-05-05 07:45:00'),
(70, 6, '2025-05-06', '2025-05-06 09:00:00', '2025-05-06 17:00:00', 25200, 'completed', '2025-05-06 13:00:00', '2025-05-06 14:00:00', 3600, '2025-05-06 06:00:00'),
(71, 6, '2025-05-07', '2025-05-07 08:45:00', '2025-05-07 16:45:00', 28800, 'completed', '2025-05-07 12:45:00', '2025-05-07 13:45:00', 3600, '2025-05-07 05:45:00'),
(72, 6, '2025-05-08', '2025-05-08 09:30:00', '2025-05-08 17:30:00', 25200, 'completed', '2025-05-08 13:30:00', '2025-05-08 14:30:00', 3600, '2025-05-08 06:30:00'),
(73, 6, '2025-05-09', '2025-05-09 10:00:00', '2025-05-09 18:00:00', 25200, 'completed', '2025-05-09 14:00:00', '2025-05-09 15:00:00', 3600, '2025-05-09 07:00:00'),
(74, 6, '2025-05-12', '2025-05-12 08:15:00', '2025-05-12 16:15:00', 28800, 'completed', '2025-05-12 12:15:00', '2025-05-12 13:15:00', 3600, '2025-05-12 05:15:00'),
(75, 6, '2025-05-13', '2025-05-13 09:45:00', '2025-05-13 17:45:00', 25200, 'completed', '2025-05-13 13:45:00', '2025-05-13 14:45:00', 3600, '2025-05-13 06:45:00'),
(76, 6, '2025-05-14', '2025-05-14 10:30:00', '2025-05-14 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-14 07:30:00'),
(77, 6, '2025-05-15', '2025-05-15 09:15:00', '2025-05-15 17:15:00', 25200, 'completed', '2025-05-15 13:15:00', '2025-05-15 14:15:00', 3600, '2025-05-15 06:15:00'),
(78, 6, '2025-05-16', '2025-05-16 08:00:00', '2025-05-16 16:00:00', 28800, 'completed', '2025-05-16 12:00:00', '2025-05-16 13:00:00', 3600, '2025-05-16 05:00:00'),
(79, 6, '2025-05-19', '2025-05-19 09:30:00', '2025-05-19 17:30:00', 25200, 'completed', '2025-05-19 13:30:00', '2025-05-19 14:30:00', 3600, '2025-05-19 06:30:00'),
(80, 6, '2025-05-20', '2025-05-20 10:45:00', '2025-05-20 18:45:00', 25200, 'completed', '2025-05-20 14:45:00', '2025-05-20 15:45:00', 3600, '2025-05-20 07:45:00'),
(81, 6, '2025-05-21', '2025-05-21 08:30:00', '2025-05-21 16:30:00', 28800, 'completed', '2025-05-21 12:30:00', '2025-05-21 13:30:00', 3600, '2025-05-21 05:30:00'),
(82, 6, '2025-05-22', '2025-05-22 09:15:00', '2025-05-22 17:15:00', 25200, 'completed', '2025-05-22 13:15:00', '2025-05-22 14:15:00', 3600, '2025-05-22 06:15:00'),
(83, 6, '2025-05-23', '2025-05-23 10:00:00', '2025-05-23 18:00:00', 25200, 'completed', '2025-05-23 14:00:00', '2025-05-23 15:00:00', 3600, '2025-05-23 07:00:00'),
(84, 6, '2025-05-26', '2025-05-26 08:45:00', '2025-05-26 16:45:00', 28800, 'completed', '2025-05-26 12:45:00', '2025-05-26 13:45:00', 3600, '2025-05-26 05:45:00'),
(85, 6, '2025-05-27', '2025-05-27 09:30:00', '2025-05-27 17:30:00', 25200, 'completed', '2025-05-27 13:30:00', '2025-05-27 14:30:00', 3600, '2025-05-27 06:30:00'),
(86, 6, '2025-05-28', '2025-05-28 10:15:00', '2025-05-28 18:15:00', 25200, 'completed', '2025-05-28 14:15:00', '2025-05-28 15:15:00', 3600, '2025-05-28 07:15:00'),
(87, 6, '2025-05-29', '2025-05-29 08:00:00', '2025-05-29 16:00:00', 28800, 'completed', '2025-05-29 12:00:00', '2025-05-29 13:00:00', 3600, '2025-05-29 05:00:00'),
(89, 30, '2025-05-01', '2025-05-01 09:00:00', '2025-05-01 17:00:00', 25200, 'completed', '2025-05-01 13:00:00', '2025-05-01 14:00:00', 3600, '2025-05-01 06:00:00'),
(90, 30, '2025-05-02', '2025-05-02 10:30:00', '2025-05-02 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-02 07:30:00'),
(91, 30, '2025-05-05', '2025-05-05 08:45:00', '2025-05-05 16:45:00', 28800, 'completed', '2025-05-05 12:45:00', '2025-05-05 13:45:00', 3600, '2025-05-05 05:45:00'),
(92, 30, '2025-05-06', '2025-05-06 09:15:00', '2025-05-06 17:15:00', 25200, 'completed', '2025-05-06 13:15:00', '2025-05-06 14:15:00', 3600, '2025-05-06 06:15:00'),
(93, 30, '2025-05-07', '2025-05-07 10:00:00', '2025-05-07 18:00:00', 25200, 'completed', '2025-05-07 14:00:00', '2025-05-07 15:00:00', 3600, '2025-05-07 07:00:00'),
(94, 30, '2025-05-08', '2025-05-08 08:30:00', '2025-05-08 16:30:00', 28800, 'completed', '2025-05-08 12:30:00', '2025-05-08 13:30:00', 3600, '2025-05-08 05:30:00'),
(95, 30, '2025-05-09', '2025-05-09 09:45:00', '2025-05-09 17:45:00', 25200, 'completed', '2025-05-09 13:45:00', '2025-05-09 14:45:00', 3600, '2025-05-09 06:45:00'),
(96, 30, '2025-05-12', '2025-05-12 10:30:00', '2025-05-12 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-12 07:30:00'),
(97, 30, '2025-05-13', '2025-05-13 08:15:00', '2025-05-13 16:15:00', 28800, 'completed', '2025-05-13 12:15:00', '2025-05-13 13:15:00', 3600, '2025-05-13 05:15:00'),
(98, 30, '2025-05-14', '2025-05-14 09:00:00', '2025-05-14 17:00:00', 25200, 'completed', '2025-05-14 13:00:00', '2025-05-14 14:00:00', 3600, '2025-05-14 06:00:00'),
(99, 30, '2025-05-15', '2025-05-15 10:45:00', '2025-05-15 18:45:00', 25200, 'completed', '2025-05-15 14:45:00', '2025-05-15 15:45:00', 3600, '2025-05-15 07:45:00'),
(100, 30, '2025-05-16', '2025-05-16 08:30:00', '2025-05-16 16:30:00', 28800, 'completed', '2025-05-16 12:30:00', '2025-05-16 13:30:00', 3600, '2025-05-16 05:30:00'),
(101, 30, '2025-05-19', '2025-05-19 09:15:00', '2025-05-19 17:15:00', 25200, 'completed', '2025-05-19 13:15:00', '2025-05-19 14:15:00', 3600, '2025-05-19 06:15:00'),
(102, 30, '2025-05-20', '2025-05-20 10:00:00', '2025-05-20 18:00:00', 25200, 'completed', '2025-05-20 14:00:00', '2025-05-20 15:00:00', 3600, '2025-05-20 07:00:00'),
(103, 30, '2025-05-21', '2025-05-21 08:45:00', '2025-05-21 16:45:00', 28800, 'completed', '2025-05-21 12:45:00', '2025-05-21 13:45:00', 3600, '2025-05-21 05:45:00'),
(104, 30, '2025-05-22', '2025-05-22 09:30:00', '2025-05-22 17:30:00', 25200, 'completed', '2025-05-22 13:30:00', '2025-05-22 14:30:00', 3600, '2025-05-22 06:30:00'),
(105, 30, '2025-05-23', '2025-05-23 10:15:00', '2025-05-23 18:15:00', 25200, 'completed', '2025-05-23 14:15:00', '2025-05-23 15:15:00', 3600, '2025-05-23 07:15:00'),
(106, 30, '2025-05-26', '2025-05-26 08:00:00', '2025-05-26 16:00:00', 28800, 'completed', '2025-05-26 12:00:00', '2025-05-26 13:00:00', 3600, '2025-05-26 05:00:00'),
(107, 30, '2025-05-27', '2025-05-27 09:45:00', '2025-05-27 17:45:00', 25200, 'completed', '2025-05-27 13:45:00', '2025-05-27 14:45:00', 3600, '2025-05-27 06:45:00'),
(108, 30, '2025-05-28', '2025-05-28 10:30:00', '2025-05-28 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-28 07:30:00'),
(109, 30, '2025-05-29', '2025-05-29 08:15:00', '2025-05-29 16:15:00', 28800, 'completed', '2025-05-29 12:15:00', '2025-05-29 13:15:00', 3600, '2025-05-29 05:15:00'),
(111, 31, '2025-05-01', '2025-05-01 08:00:00', '2025-05-01 16:00:00', 28800, 'completed', '2025-05-01 12:00:00', '2025-05-01 13:00:00', 3600, '2025-05-01 05:00:00'),
(112, 31, '2025-05-02', '2025-05-02 09:30:00', '2025-05-02 17:30:00', 25200, 'completed', '2025-05-02 13:30:00', '2025-05-02 14:30:00', 3600, '2025-05-02 06:30:00'),
(113, 31, '2025-05-05', '2025-05-05 10:15:00', '2025-05-05 18:15:00', 25200, 'completed', '2025-05-05 14:15:00', '2025-05-05 15:15:00', 3600, '2025-05-05 07:15:00'),
(114, 31, '2025-05-06', '2025-05-06 08:45:00', '2025-05-06 16:45:00', 28800, 'completed', '2025-05-06 12:45:00', '2025-05-06 13:45:00', 3600, '2025-05-06 05:45:00'),
(115, 31, '2025-05-07', '2025-05-07 09:00:00', '2025-05-07 17:00:00', 25200, 'completed', '2025-05-07 13:00:00', '2025-05-07 14:00:00', 3600, '2025-05-07 06:00:00'),
(116, 31, '2025-05-08', '2025-05-08 10:45:00', '2025-05-08 16:45:00', 18000, 'completed', NULL, NULL, 0, '2025-05-08 07:45:00'),
(117, 31, '2025-05-09', '2025-05-09 08:30:00', '2025-05-09 16:30:00', 28800, 'completed', '2025-05-09 12:30:00', '2025-05-09 13:30:00', 3600, '2025-05-09 05:30:00'),
(118, 31, '2025-05-12', '2025-05-12 09:15:00', '2025-05-12 17:15:00', 25200, 'completed', '2025-05-12 13:15:00', '2025-05-12 14:15:00', 3600, '2025-05-12 06:15:00'),
(119, 31, '2025-05-13', '2025-05-13 10:00:00', '2025-05-13 18:00:00', 25200, 'completed', '2025-05-13 14:00:00', '2025-05-13 15:00:00', 3600, '2025-05-13 07:00:00'),
(120, 31, '2025-05-14', '2025-05-14 08:45:00', '2025-05-14 16:45:00', 28800, 'completed', '2025-05-14 12:45:00', '2025-05-14 13:45:00', 3600, '2025-05-14 05:45:00'),
(121, 31, '2025-05-15', '2025-05-15 09:30:00', '2025-05-15 17:30:00', 25200, 'completed', '2025-05-15 13:30:00', '2025-05-15 14:30:00', 3600, '2025-05-15 06:30:00'),
(122, 31, '2025-05-16', '2025-05-16 10:15:00', '2025-05-16 18:15:00', 25200, 'completed', '2025-05-16 14:15:00', '2025-05-16 15:15:00', 3600, '2025-05-16 07:15:00'),
(123, 31, '2025-05-19', '2025-05-19 08:00:00', '2025-05-19 16:00:00', 28800, 'completed', '2025-05-19 12:00:00', '2025-05-19 13:00:00', 3600, '2025-05-19 05:00:00'),
(124, 31, '2025-05-20', '2025-05-20 09:45:00', '2025-05-20 17:45:00', 25200, 'completed', '2025-05-20 13:45:00', '2025-05-20 14:45:00', 3600, '2025-05-20 06:45:00'),
(125, 31, '2025-05-21', '2025-05-21 10:30:00', '2025-05-21 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-21 07:30:00'),
(126, 31, '2025-05-22', '2025-05-22 08:15:00', '2025-05-22 16:15:00', 28800, 'completed', '2025-05-22 12:15:00', '2025-05-22 13:15:00', 3600, '2025-05-22 05:15:00'),
(127, 31, '2025-05-23', '2025-05-23 09:00:00', '2025-05-23 17:00:00', 25200, 'completed', '2025-05-23 13:00:00', '2025-05-23 14:00:00', 3600, '2025-05-23 06:00:00'),
(128, 31, '2025-05-26', '2025-05-26 10:45:00', '2025-05-26 18:45:00', 25200, 'completed', '2025-05-26 14:45:00', '2025-05-26 15:45:00', 3600, '2025-05-26 07:45:00'),
(129, 31, '2025-05-27', '2025-05-27 08:30:00', '2025-05-27 16:30:00', 28800, 'completed', '2025-05-27 12:30:00', '2025-05-27 13:30:00', 3600, '2025-05-27 05:30:00'),
(130, 31, '2025-05-28', '2025-05-28 09:15:00', '2025-05-28 17:15:00', 25200, 'completed', '2025-05-28 13:15:00', '2025-05-28 14:15:00', 3600, '2025-05-28 06:15:00'),
(131, 31, '2025-05-29', '2025-05-29 10:00:00', '2025-05-29 18:00:00', 25200, 'completed', '2025-05-29 14:00:00', '2025-05-29 15:00:00', 3600, '2025-05-29 07:00:00'),
(133, 32, '2025-05-01', '2025-05-01 09:30:00', '2025-05-01 17:30:00', 25200, 'completed', '2025-05-01 13:30:00', '2025-05-01 14:30:00', 3600, '2025-05-01 06:30:00'),
(134, 32, '2025-05-02', '2025-05-02 08:15:00', '2025-05-02 16:15:00', 28800, 'completed', '2025-05-02 12:15:00', '2025-05-02 13:15:00', 3600, '2025-05-02 05:15:00'),
(135, 32, '2025-05-05', '2025-05-05 10:00:00', '2025-05-05 18:00:00', 25200, 'completed', '2025-05-05 14:00:00', '2025-05-05 15:00:00', 3600, '2025-05-05 07:00:00'),
(136, 32, '2025-05-06', '2025-05-06 09:45:00', '2025-05-06 17:45:00', 25200, 'completed', '2025-05-06 13:45:00', '2025-05-06 14:45:00', 3600, '2025-05-06 06:45:00'),
(137, 32, '2025-05-07', '2025-05-07 08:30:00', '2025-05-07 16:30:00', 28800, 'completed', '2025-05-07 12:30:00', '2025-05-07 13:30:00', 3600, '2025-05-07 05:30:00'),
(138, 32, '2025-05-08', '2025-05-08 10:15:00', '2025-05-08 16:15:00', 18000, 'completed', NULL, NULL, 0, '2025-05-08 07:15:00'),
(139, 32, '2025-05-09', '2025-05-09 09:00:00', '2025-05-09 17:00:00', 25200, 'completed', '2025-05-09 13:00:00', '2025-05-09 14:00:00', 3600, '2025-05-09 06:00:00'),
(140, 32, '2025-05-12', '2025-05-12 08:45:00', '2025-05-12 16:45:00', 28800, 'completed', '2025-05-12 12:45:00', '2025-05-12 13:45:00', 3600, '2025-05-12 05:45:00'),
(141, 32, '2025-05-13', '2025-05-13 10:30:00', '2025-05-13 16:30:00', 18000, 'completed', NULL, NULL, 0, '2025-05-13 07:30:00'),
(142, 32, '2025-05-14', '2025-05-14 09:15:00', '2025-05-14 17:15:00', 25200, 'completed', '2025-05-14 13:15:00', '2025-05-14 14:15:00', 3600, '2025-05-14 06:15:00'),
(143, 32, '2025-05-15', '2025-05-15 08:00:00', '2025-05-15 16:00:00', 28800, 'completed', '2025-05-15 12:00:00', '2025-05-15 13:00:00', 3600, '2025-05-15 05:00:00'),
(144, 32, '2025-05-16', '2025-05-16 09:45:00', '2025-05-16 17:45:00', 25200, 'completed', '2025-05-16 13:45:00', '2025-05-16 14:45:00', 3600, '2025-05-16 06:45:00'),
(145, 32, '2025-05-19', '2025-05-19 10:30:00', '2025-05-19 18:30:00', 25200, 'completed', '2025-05-19 14:30:00', '2025-05-19 15:30:00', 3600, '2025-05-19 07:30:00'),
(146, 32, '2025-05-20', '2025-05-20 08:15:00', '2025-05-20 16:15:00', 28800, 'completed', '2025-05-20 12:15:00', '2025-05-20 13:15:00', 3600, '2025-05-20 05:15:00'),
(147, 32, '2025-05-21', '2025-05-21 09:00:00', '2025-05-21 17:00:00', 25200, 'completed', '2025-05-21 13:00:00', '2025-05-21 14:00:00', 3600, '2025-05-21 06:00:00'),
(148, 32, '2025-05-22', '2025-05-22 10:45:00', '2025-05-22 16:45:00', 18000, 'completed', NULL, NULL, 0, '2025-05-22 07:45:00'),
(149, 32, '2025-05-23', '2025-05-23 08:30:00', '2025-05-23 16:30:00', 28800, 'completed', '2025-05-23 12:30:00', '2025-05-23 13:30:00', 3600, '2025-05-23 05:30:00'),
(150, 32, '2025-05-26', '2025-05-26 09:15:00', '2025-05-26 17:15:00', 25200, 'completed', '2025-05-26 13:15:00', '2025-05-26 14:15:00', 3600, '2025-05-26 06:15:00'),
(151, 32, '2025-05-27', '2025-05-27 10:00:00', '2025-05-27 18:00:00', 25200, 'completed', '2025-05-27 14:00:00', '2025-05-27 15:00:00', 3600, '2025-05-27 07:00:00'),
(152, 32, '2025-05-28', '2025-05-28 08:45:00', '2025-05-28 16:45:00', 28800, 'completed', '2025-05-28 12:45:00', '2025-05-28 13:45:00', 3600, '2025-05-28 05:45:00'),
(153, 32, '2025-05-29', '2025-05-29 09:30:00', '2025-05-29 17:30:00', 25200, 'completed', '2025-05-29 13:30:00', '2025-05-29 14:30:00', 3600, '2025-05-29 06:30:00'),
(156, 6, '2025-05-30', '2025-05-30 08:30:36', '2025-05-30 08:30:54', 16, 'completed', NULL, NULL, 4, '2025-05-30 08:30:31'),
(157, 6, '2025-05-30', '2025-05-30 08:31:02', '2025-05-30 08:31:35', 32, 'completed', NULL, NULL, 0, '2025-05-30 08:31:02'),
(158, 6, '2025-05-30', '2025-05-30 08:37:50', '2025-05-30 08:38:01', 10, 'completed', NULL, NULL, 0, '2025-05-30 08:37:50'),
(164, 31, '2025-06-05', '2025-06-05 10:17:46', '2025-06-05 10:17:49', 3, 'completed', NULL, NULL, 0, '2025-06-05 10:17:46'),
(165, 1, '2025-06-05', '2025-06-05 10:17:52', '2025-06-05 10:18:00', 11, 'completed', '2025-06-05 10:17:55', '2025-06-05 10:17:56', 0, '2025-06-05 10:17:52'),
(166, 30, '2025-06-04', '2025-06-05 14:39:39', '2025-06-05 14:39:39', 60, 'completed', NULL, NULL, 0, '2025-06-05 14:39:39'),
(167, 30, '2025-06-04', '2025-06-05 14:39:59', '2025-06-05 14:39:59', 28800, 'completed', NULL, NULL, 0, '2025-06-05 14:39:59'),
(168, 1, '2025-06-05', '2025-06-05 14:40:09', '2025-06-05 14:40:09', 28800, 'completed', NULL, NULL, 0, '2025-06-05 14:40:09'),
(169, 31, '2025-06-05', '2025-06-05 14:40:18', '2025-06-05 14:40:18', 28800, 'completed', NULL, NULL, 0, '2025-06-05 14:40:18');

--
-- Индексы сохранённых таблиц
--

--
-- Индексы таблицы `departments`
--
ALTER TABLE `departments`
  ADD PRIMARY KEY (`id`),
  ADD KEY `parent_id` (`parent_id`);

--
-- Индексы таблицы `permissions`
--
ALTER TABLE `permissions`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `code` (`code`);

--
-- Индексы таблицы `positions`
--
ALTER TABLE `positions`
  ADD PRIMARY KEY (`id`),
  ADD KEY `department_id` (`department_id`);

--
-- Индексы таблицы `roles`
--
ALTER TABLE `roles`
  ADD PRIMARY KEY (`id`);

--
-- Индексы таблицы `role_permissions`
--
ALTER TABLE `role_permissions`
  ADD PRIMARY KEY (`role_id`,`permission_id`),
  ADD KEY `permission_id` (`permission_id`);

--
-- Индексы таблицы `turnstile_logs`
--
ALTER TABLE `turnstile_logs`
  ADD PRIMARY KEY (`id`),
  ADD KEY `session_id` (`session_id`);

--
-- Индексы таблицы `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `email` (`email`),
  ADD KEY `idx_email` (`email`),
  ADD KEY `fk_users_position` (`position_id`),
  ADD KEY `fk_users_department` (`department_id`);

--
-- Индексы таблицы `user_day_events`
--
ALTER TABLE `user_day_events`
  ADD PRIMARY KEY (`id`);

--
-- Индексы таблицы `work_sessions`
--
ALTER TABLE `work_sessions`
  ADD PRIMARY KEY (`id`),
  ADD KEY `user_date_status` (`user_id`,`date`,`status`);

--
-- AUTO_INCREMENT для сохранённых таблиц
--

--
-- AUTO_INCREMENT для таблицы `departments`
--
ALTER TABLE `departments`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- AUTO_INCREMENT для таблицы `permissions`
--
ALTER TABLE `permissions`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT для таблицы `positions`
--
ALTER TABLE `positions`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- AUTO_INCREMENT для таблицы `roles`
--
ALTER TABLE `roles`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT для таблицы `turnstile_logs`
--
ALTER TABLE `turnstile_logs`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=13;

--
-- AUTO_INCREMENT для таблицы `users`
--
ALTER TABLE `users`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=35;

--
-- AUTO_INCREMENT для таблицы `user_day_events`
--
ALTER TABLE `user_day_events`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=24;

--
-- AUTO_INCREMENT для таблицы `work_sessions`
--
ALTER TABLE `work_sessions`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=170;

--
-- Ограничения внешнего ключа сохраненных таблиц
--

--
-- Ограничения внешнего ключа таблицы `departments`
--
ALTER TABLE `departments`
  ADD CONSTRAINT `departments_ibfk_1` FOREIGN KEY (`parent_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL;

--
-- Ограничения внешнего ключа таблицы `positions`
--
ALTER TABLE `positions`
  ADD CONSTRAINT `positions_ibfk_1` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL;

--
-- Ограничения внешнего ключа таблицы `role_permissions`
--
ALTER TABLE `role_permissions`
  ADD CONSTRAINT `role_permissions_ibfk_1` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`),
  ADD CONSTRAINT `role_permissions_ibfk_2` FOREIGN KEY (`permission_id`) REFERENCES `permissions` (`id`);

--
-- Ограничения внешнего ключа таблицы `users`
--
ALTER TABLE `users`
  ADD CONSTRAINT `fk_users_department` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`),
  ADD CONSTRAINT `fk_users_position` FOREIGN KEY (`position_id`) REFERENCES `positions` (`id`);

--
-- Ограничения внешнего ключа таблицы `work_sessions`
--
ALTER TABLE `work_sessions`
  ADD CONSTRAINT `work_sessions_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
